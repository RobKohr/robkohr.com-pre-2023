<html><head><meta charset="utf-8"><title>[code at the end of the post]&lt;br&gt;What happens when you round 3.6 ---&amp;gt; you ...</title><style>body {font: 11pt Roboto, Arial, sans-serif; max-width: 640px; margin: 24px;}.author-photo {border-radius: 50%; margin-right: 10px; width: 40px;}.author {font-weight: 500;}.main-content {margin: 15px 0 15px;}.post-title {font-weight: bold;}.location {display: block; margin-top: 15px;}.location img {float: left; margin-right: 5px; width: 20px;}.media-link {display: inline-block; max-width: 100%; vertical-align: top;}.media-link p {margin-top: 5px; max-height: 4em; overflow: scroll;}.media {max-height: 100vh; max-width: 100%;}.video-placeholder {background: black; display: flex; height: 300px; max-width: 100%; width: 640px;}.play-icon {border-bottom: 30px solid transparent; border-left: 50px solid white; border-top: 30px solid transparent; color: white; margin: auto;}.album {max-height: 800px; overflow: scroll; width: calc(100vw - 48px);}.album .media-link {margin-right: 5px; max-width: 250px;}.album .media {max-height: 250px;}.link-embed {border-top: 1px solid lightgrey; display: block; margin-top: 20px;}.link-embed img {max-width: 100%;}.inline-link-embed {display: block;}.inline-link-embed img {vertical-align: middle;}.link-title {display: inline-block; font-size: medium; font-weight: 300; padding-left: 1em;}.reshare-attribution {display: block; font-weight: bold; margin-bottom: 10px;}.poll-image {margin-bottom: 5px; max-height: 300px; max-width: 500px;}.poll-choice {align-items: center; display: flex; margin-bottom: 5px; max-width: 500px;}.poll-choice-percentage {background-color: lightblue; height: 100%; left: 0; position: absolute; z-index: -1;}.poll-choice-selected {margin-right: 5px;}.poll-choice-results {border: 1px solid lightgray; border-radius: 5px; display: flex; line-height: 40px; overflow: hidden; padding: 0 8px; position: relative;}.poll-choice-results, .poll-choice-description {flex-grow: 1; margin-right: 10px;}.poll-choice-image {width: 100%;}.poll-choice-image, .poll-choice-image img {max-height: 40px; max-width: 100px;}.poll-choice-votes {max-height: 100px; overflow: auto;}.plus-entity-embed {color: black; display: block; text-decoration: none;}.plus-entity-embed-cover-photo {max-height: 300px; max-width: 100%;}.plus-entity-embed-info {padding: 0 1em 1em;}.plus-entity-embed-info h2 {font-weight: 500; margin: 10px 0;}.plus-entity-embed-info p {font-size: small; margin: 0;}.collection-owner-avatar {border-radius: 50%; border: 2px solid white; height: 40px; margin-top: -22px;}.visibility {padding: 1em 0; border-top: 1px solid grey;}.post-activity {padding: 1em 0; border-top: 1px solid grey;}.post-kind-desc {margin-bottom: 15pt;}.comments {border-top: 1px solid gray; padding-top: 1em;}.comment + .comment {margin-top: 1em;}.comment .media-link, .comment .inline-link-embed {margin-top: 5px;}</style></head><body itemid="https://plus.google.com/+RobKohr/posts/C1yNkUCk1MD" itemscope itemtype="http://schema.org/SocialMediaPosting"><div style="margin-bottom:1em;"><div style="display:flex; align-items:center"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="author-photo" src="https://lh3.googleusercontent.com/a-/AAuE7mDf8D_Ocqr5I5mLUS_xxY4AmUlTsK7W-ZWmqEFC5g=s64-c" alt="Rob Kohr" itemprop="image"><a href="https://plus.google.com/+RobKohr" target="_blank" class="author" itemprop="url"><span itemprop="name">Rob Kohr</span></a></span> - <a target="_blank" href="https://plus.google.com/+RobKohr/posts/C1yNkUCk1MD"><span itemprop="dateCreated">2011-10-24T10:14:06-0400</span></a><span> - Updated: <span itemprop="dateModified">2011-10-24T10:14:52-0400</span></span></div><div class="main-content"><span itemprop="text">[code at the end of the post]<br>What happens when you round 3.6 ---&gt; you get 4. <br><br>What about in a game? Should every time a player kills 3.6 of an enemy, should it be really 4? <br><br>Probably not, but the math might have that happen all of the time. It should be that it rounds up 60% of the time. Over time, the average player would then kill 3.6 enemies, without having to deal without the sticky philosophical questions of an enemy that is 40% alive.<br><br>Here is a little function that will prevent that. (in JS, but easy to convert)<br><br><br> //adjusts a value up or down to nearest int with a random factor <br> //based upon the decimal value. i.e. 3.2 has a 80% chance of being 3, 20% of 4 var randRound = function(num){<br> var num = Number(num);<br> var floor = Math.floor(num);<br> var dec = num - floor;<br> if(Math.random()&gt;dec){<br> return floor;<br> }<br> return Math.ceil(num);<br> }</span></div></div><span itemprop="audience"><div class="visibility">Shared with: Public</div></span><meta itemprop="commentCount" content="1"><div class="comments"><div class="comment" itemprop="comment" itemscope itemtype="http://schema.org/Comment"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><a target="_blank" href="https://plus.google.com/+RobKohr" class="author" itemprop="url"><span itemprop="name">Rob Kohr</span></a></span><span class="time"> - <span itemprop="dateCreated">2011-10-24T13:53:42-0400</span></span><div class="comment-content" itemprop="text">Thanks <span class="proflinkWrapper"><span class="proflinkPrefix">+</span><a class="proflink bidi_isolate" href="https://plus.google.com/101390729659078829753" oid="101390729659078829753" >Christer Kaitila</a></span> !<br><br>I used the game example, but this is really valid for any time you are moving from something that generates a floating point value and need to convert it into something discrete. Very often an algorithm will produce the same rounding error again and again, and the cumulative effects can be very distorting.</div></div></div></body></html>